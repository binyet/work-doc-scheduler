"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("electron"),l=require("node:module"),d=require("node:url"),n=require("node:path");var t=typeof document<"u"?document.currentScript:null;l.createRequire(typeof document>"u"?require("url").pathToFileURL(__filename).href:t&&t.tagName.toUpperCase()==="SCRIPT"&&t.src||new URL("main.js",document.baseURI).href);const c=n.dirname(d.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:t&&t.tagName.toUpperCase()==="SCRIPT"&&t.src||new URL("main.js",document.baseURI).href));process.env.APP_ROOT=n.join(c,"..");const r=process.env.VITE_DEV_SERVER_URL,p=n.join(process.env.APP_ROOT,"dist-electron"),i=n.join(process.env.APP_ROOT,"dist");process.env.VITE_PUBLIC=r?n.join(process.env.APP_ROOT,"public"):i;let e;function a(){e=new o.BrowserWindow({icon:n.join(process.env.VITE_PUBLIC,"electron-vite.svg"),webPreferences:{preload:n.join(c,"preload.js"),nodeIntegration:!0,contextIsolation:!0,sandbox:!1,webSecurity:!1}}),e.webContents.on("did-finish-load",()=>{e==null||e.webContents.send("main-process-message",new Date().toLocaleString())}),r?e.loadURL(r):e.loadFile(n.join(i,"index.html")),process.env.NODE_ENV==="development"&&e.webContents.openDevTools()}o.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(o.app.quit(),e=null)});o.app.on("activate",()=>{o.BrowserWindow.getAllWindows().length===0&&a()});o.ipcMain.on("open-file",(u,s)=>{o.shell.openPath(s[0]).then(()=>{console.log("open file success",s[0])}).catch(R=>{console.error("open file error",s[0])})});o.app.whenReady().then(a);exports.MAIN_DIST=p;exports.RENDERER_DIST=i;exports.VITE_DEV_SERVER_URL=r;
